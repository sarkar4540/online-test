{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import htmlparser from'htmlparser2-without-node-native';import entities from'entities';import AutoSizedImage from\"./AutoSizedImage\";var defaultOpts={lineBreak:'\\n',paragraphBreak:'\\n\\n',bullet:\"\\u2022 \",TextComponent:Text,textComponentProps:null,NodeComponent:Text,nodeComponentProps:null};var Img=function Img(props){var width=parseInt(props.attribs['width'],10)||parseInt(props.attribs['data-width'],10)||0;var height=parseInt(props.attribs['height'],10)||parseInt(props.attribs['data-height'],10)||0;var imgStyle={width:width,height:height};var source={uri:props.attribs.src,width:width,height:height};return React.createElement(AutoSizedImage,{source:source,style:imgStyle});};export default function htmlToElement(rawHtml){var customOpts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var done=arguments.length>2?arguments[2]:undefined;var opts=_objectSpread(_objectSpread({},defaultOpts),customOpts);function inheritedStyle(parent){if(!parent)return null;var style=StyleSheet.flatten(opts.styles[parent.name])||{};var parentStyle=inheritedStyle(parent.parent)||{};return _objectSpread(_objectSpread({},parentStyle),style);}function domToElement(dom,parent){if(!dom)return null;var renderNode=opts.customRenderer;var orderedListCounter=1;return dom.map(function(node,index,list){if(renderNode){var rendered=renderNode(node,index,list,parent,domToElement);if(rendered||rendered===null)return rendered;}var TextComponent=opts.TextComponent;if(node.type==='text'){var defaultStyle=opts.textComponentProps?opts.textComponentProps.style:null;var customStyle=inheritedStyle(parent);return React.createElement(TextComponent,_extends({},opts.textComponentProps,{key:index,style:[defaultStyle,customStyle]}),entities.decodeHTML(node.data));}if(node.type==='tag'){if(node.name==='img'){return React.createElement(Img,{key:index,attribs:node.attribs});}var linkPressHandler=null;var linkLongPressHandler=null;if(node.name==='a'&&node.attribs&&node.attribs.href){linkPressHandler=function linkPressHandler(){return opts.linkHandler(entities.decodeHTML(node.attribs.href));};if(opts.linkLongPressHandler){linkLongPressHandler=function linkLongPressHandler(){return opts.linkLongPressHandler(entities.decodeHTML(node.attribs.href));};}}var linebreakBefore=null;var linebreakAfter=null;if(opts.addLineBreaks){switch(node.name){case'pre':linebreakBefore=opts.lineBreak;break;case'p':if(index<list.length-1){linebreakAfter=opts.paragraphBreak;}break;case'br':case'h1':case'h2':case'h3':case'h4':case'h5':linebreakAfter=opts.lineBreak;break;}}var listItemPrefix=null;if(node.name==='li'){var _defaultStyle=opts.textComponentProps?opts.textComponentProps.style:null;var _customStyle=inheritedStyle(parent);if(!parent){listItemPrefix=null;}else if(parent.name==='ol'){listItemPrefix=React.createElement(TextComponent,{style:[_defaultStyle,_customStyle]},orderedListCounter++ +\". \");}else if(parent.name==='ul'){listItemPrefix=React.createElement(TextComponent,{style:[_defaultStyle,_customStyle]},opts.bullet);}if(opts.addLineBreaks&&index<list.length-1){linebreakAfter=opts.lineBreak;}}var NodeComponent=opts.NodeComponent,styles=opts.styles;return React.createElement(NodeComponent,_extends({},opts.nodeComponentProps,{key:index,onPress:linkPressHandler,style:!node.parent?styles[node.name]:null,onLongPress:linkLongPressHandler}),linebreakBefore,listItemPrefix,domToElement(node.children,node),linebreakAfter);}});}var handler=new htmlparser.DomHandler(function(err,dom){if(err)done(err);done(null,domToElement(dom));});var parser=new htmlparser.Parser(handler);parser.write(rawHtml);parser.done();}","map":{"version":3,"sources":["/home/sarkar4540/Code/sarkar nigam/magnox/online-test/test-system/node_modules/react-native-htmlview/htmlToElement.js"],"names":["React","htmlparser","entities","AutoSizedImage","defaultOpts","lineBreak","paragraphBreak","bullet","TextComponent","Text","textComponentProps","NodeComponent","nodeComponentProps","Img","props","width","parseInt","attribs","height","imgStyle","source","uri","src","htmlToElement","rawHtml","customOpts","done","opts","inheritedStyle","parent","style","StyleSheet","flatten","styles","name","parentStyle","domToElement","dom","renderNode","customRenderer","orderedListCounter","map","node","index","list","rendered","type","defaultStyle","customStyle","decodeHTML","data","linkPressHandler","linkLongPressHandler","href","linkHandler","linebreakBefore","linebreakAfter","addLineBreaks","length","listItemPrefix","children","handler","DomHandler","err","parser","Parser","write"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {StyleSheet, Text} from 'react-native';\nimport htmlparser from 'htmlparser2-without-node-native';\nimport entities from 'entities';\n\nimport AutoSizedImage from './AutoSizedImage';\n\nconst defaultOpts = {\n  lineBreak: '\\n',\n  paragraphBreak: '\\n\\n',\n  bullet: '\\u2022 ',\n  TextComponent: Text,\n  textComponentProps: null,\n  NodeComponent: Text,\n  nodeComponentProps: null,\n};\n\nconst Img = props => {\n  const width =\n    parseInt(props.attribs['width'], 10) || parseInt(props.attribs['data-width'], 10) || 0;\n  const height =\n    parseInt(props.attribs['height'], 10) ||\n    parseInt(props.attribs['data-height'], 10) ||\n    0;\n\n  const imgStyle = {\n    width,\n    height,\n  };\n\n  const source = {\n    uri: props.attribs.src,\n    width,\n    height,\n  };\n  return <AutoSizedImage source={source} style={imgStyle} />;\n};\n\nexport default function htmlToElement(rawHtml, customOpts = {}, done) {\n  const opts = {\n    ...defaultOpts,\n    ...customOpts,\n  };\n\n  function inheritedStyle(parent) {\n    if (!parent) return null;\n    const style = StyleSheet.flatten(opts.styles[parent.name]) || {};\n    const parentStyle = inheritedStyle(parent.parent) || {};\n    return {...parentStyle, ...style};\n  }\n\n  function domToElement(dom, parent) {\n    if (!dom) return null;\n\n    const renderNode = opts.customRenderer;\n    let orderedListCounter = 1;\n\n    return dom.map((node, index, list) => {\n      if (renderNode) {\n        const rendered = renderNode(\n          node,\n          index,\n          list,\n          parent,\n          domToElement\n        );\n        if (rendered || rendered === null) return rendered;\n      }\n\n      const {TextComponent} = opts;\n\n      if (node.type === 'text') {\n        const defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n        const customStyle = inheritedStyle(parent);\n\n        return (\n          <TextComponent\n            {...opts.textComponentProps}\n            key={index}\n            style={[defaultStyle, customStyle]}\n          >\n            {entities.decodeHTML(node.data)}\n          </TextComponent>\n        );\n      }\n\n      if (node.type === 'tag') {\n        if (node.name === 'img') {\n          return <Img key={index} attribs={node.attribs} />;\n        }\n\n        let linkPressHandler = null;\n        let linkLongPressHandler = null;\n        if (node.name === 'a' && node.attribs && node.attribs.href) {\n          linkPressHandler = () =>\n            opts.linkHandler(entities.decodeHTML(node.attribs.href));\n          if (opts.linkLongPressHandler) {\n            linkLongPressHandler = () =>\n              opts.linkLongPressHandler(entities.decodeHTML(node.attribs.href));\n          }\n        }\n\n        let linebreakBefore = null;\n        let linebreakAfter = null;\n        if (opts.addLineBreaks) {\n          switch (node.name) {\n          case 'pre':\n            linebreakBefore = opts.lineBreak;\n            break;\n          case 'p':\n            if (index < list.length - 1) {\n              linebreakAfter = opts.paragraphBreak;\n            }\n            break;\n          case 'br':\n          case 'h1':\n          case 'h2':\n          case 'h3':\n          case 'h4':\n          case 'h5':\n            linebreakAfter = opts.lineBreak;\n            break;\n          }\n        }\n\n        let listItemPrefix = null;\n        if (node.name === 'li') {\n          const defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n          const customStyle = inheritedStyle(parent);\n\n          if(!parent){\n            listItemPrefix = null;\n          } else if (parent.name === 'ol') {\n            listItemPrefix = (<TextComponent style={[defaultStyle, customStyle]}>\n              {`${orderedListCounter++}. `}\n            </TextComponent>);\n          } else if (parent.name === 'ul') {\n            listItemPrefix = (<TextComponent style={[defaultStyle, customStyle]}>\n              {opts.bullet}\n            </TextComponent>);\n          }\n          if (opts.addLineBreaks && index < list.length - 1) {\n            linebreakAfter = opts.lineBreak;\n          }\n        }\n\n        const {NodeComponent, styles} = opts;\n\n        return (\n          <NodeComponent\n            {...opts.nodeComponentProps}\n            key={index}\n            onPress={linkPressHandler}\n            style={!node.parent ? styles[node.name] : null}\n            onLongPress={linkLongPressHandler}\n          >\n            {linebreakBefore}\n            {listItemPrefix}\n            {domToElement(node.children, node)}\n            {linebreakAfter}\n          </NodeComponent>\n        );\n      }\n    });\n  }\n\n  const handler = new htmlparser.DomHandler(function(err, dom) {\n    if (err) done(err);\n    done(null, domToElement(dom));\n  });\n  const parser = new htmlparser.Parser(handler);\n  parser.write(rawHtml);\n  parser.done();\n}\n"]},"metadata":{},"sourceType":"module"}